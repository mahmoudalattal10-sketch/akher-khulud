import{u as $,H as F,j as e}from"./index-DmENlvps.js";import{b as H,r as b,a as z}from"./vendor-react-DKBRiY3W.js";import{h as M,j as A,o as P,k as _,g as I,v as B,w as G,G as K,i as Y,a5 as J,X as Q}from"./vendor-utils-BTxUMNdh.js";import{C as q}from"./CalendarUI-DNAkTNEo.js";const W=()=>{const i=H(),{searchData:n,updateSearch:f}=$(),[c,D]=b.useState("none"),[a,x]=b.useState(new Date);return{searchData:n,updateSearch:f,activeSheet:c,setActiveSheet:D,currentMonth:a,handleNextMonth:()=>{x(new Date(a.getFullYear(),a.getMonth()+1,1))},handlePrevMonth:()=>{x(new Date(a.getFullYear(),a.getMonth()-1,1))},isSelected:s=>!!(n.checkIn&&s.toDateString()===n.checkIn.toDateString()||n.checkOut&&s.toDateString()===n.checkOut.toDateString()),isInRange:s=>{if(!n.checkIn||!n.checkOut)return!1;const l=new Date(s).setHours(0,0,0,0),d=new Date(n.checkIn).setHours(0,0,0,0),m=new Date(n.checkOut).setHours(0,0,0,0);return l>d&&l<m},handleDaySelect:s=>{const l=new Date(s);l.setHours(0,0,0,0),!n.checkIn||n.checkIn&&n.checkOut?f({checkIn:l,checkOut:null}):l>n.checkIn?f({checkIn:n.checkIn,checkOut:l}):f({checkIn:l,checkOut:null})},handleFieldClick:s=>{D(s===c?"none":s)},closeSheet:()=>D("none"),handleSearch:s=>{if(!s){D("destination"),alert("يرجى اختيار الوجهة أولاً للبدء بالبحث");return}const l=new URLSearchParams;let d=s;const m=["مكة المكرمة","مكه المكرمه","مكة","مكه","makkah"],r=["المدينة المنورة","المدينه المنوره","المدينة","المدينه","madinah"],t=["جدة","جده","jeddah"],h=["الرياض","riyadh"];m.includes(s)?d="makkah":r.includes(s)?d="madinah":t.includes(s)?d="jeddah":h.includes(s)?d="riyadh":s==="دبي"||s.toLowerCase()==="dubai"?d="dubai":s==="القاهرة"||s.toLowerCase()==="cairo"?d="cairo":s==="الدوحة"||s.toLowerCase()==="doha"?d="doha":(s==="جميع الفنادق"||s==="الكل")&&(d="all");const u=C=>{const U=C.getFullYear(),w=String(C.getMonth()+1).padStart(2,"0"),V=String(C.getDate()).padStart(2,"0");return`${U}-${w}-${V}`};d&&l.append("city",d),n.checkIn&&l.append("checkIn",u(n.checkIn)),n.checkOut&&l.append("checkOut",u(n.checkOut));const k=(n.adults||0)+(n.children||0);k>0&&l.append("guests",k.toString()),i(`/hotels?${l.toString()}`)}}},R={city:null,maxPrice:1e4,minRating:0,starRatings:[],maxDistance:[],hasOffer:!1,hasFreeBreakfast:!1,hasFreeTransport:!1,amenities:[]},T={field:"rating",direction:"desc"},S=i=>{if(i==null)return 9999;const n=String(i);if(!n.trim())return 9999;if(n.includes("صف أول")||n.includes("مباشر"))return 0;const f=n.match(/(\d+)/);return f?parseInt(f[0]):9999},X=(i,n)=>{const[f,c]=b.useState([]),[D,a]=b.useState(!0),[x,E]=b.useState(null),[o,g]=b.useState({...R,city:i}),[y,j]=b.useState(T),[v,p]=b.useState(""),N=b.useCallback(async()=>{a(!0),E(null);try{const m={};if(i&&i!=="all"&&(m.city=i),n?.checkIn){const t=new Date(n.checkIn);m.checkIn=t.toLocaleDateString("en-CA")}if(n?.checkOut){const t=new Date(n.checkOut);m.checkOut=t.toLocaleDateString("en-CA")}n?.guests&&(m.guests=n.guests);const r=await F.getAll(m);r.success&&Array.isArray(r.data)?c(r.data):r.success&&r.data?(c(Array.isArray(r.data)?r.data:[]),Array.isArray(r.data)||console.warn("API returned non-array data for hotels:",r.data)):(E(r.error||"فشل في تحميل الفنادق"),c([]))}catch{E("حدث خطأ في الاتصال بالخادم")}finally{a(!1)}},[i,n?.checkIn,n?.checkOut,n?.guests]);b.useEffect(()=>{N()},[N]),b.useEffect(()=>{i!==void 0&&g(m=>({...m,city:i}))},[i]);const s=b.useCallback((m,r)=>{g(t=>({...t,[m]:r}))},[]),l=b.useCallback(()=>{g(R),j(T),p("")},[]),d=b.useMemo(()=>{let r=(Array.isArray(f)?f:[]).filter(t=>t&&t.basePrice!=null&&!isNaN(Number(t.basePrice)));if(v.trim()){const t=u=>u.toLowerCase().replace(/ة/g,"ه").replace(/أ|إ|آ/g,"ا").replace(/فندق/g,"").replace(/\b(hotel|the)\b/g,"").replace(/\s+/g," ").trim(),h=t(v).split(" ").filter(u=>u.length>0);r=r.filter(u=>{const k=t(`${u.name} ${u.nameEn||""} ${u.location} ${u.description||""}`);return h.every(C=>k.includes(C))})}if(o.city&&o.city!=="all"){const t=String(o.city).toLowerCase().trim(),h=["مكة","makkah","مكه","makka"],u=["المدينة","madinah","المدينه","مدينة","madina"],k=["جدة","jeddah","جده"],C=["الرياض","riyadh","riyad"];r=r.filter(U=>{const w=(U.city||"").toLowerCase(),V=(U.location||"").toLowerCase();return h.includes(t)||t==="makkah"?h.some(O=>w.includes(O)||V.includes(O)):u.includes(t)||t==="madinah"?u.some(O=>w.includes(O)||V.includes(O)):k.includes(t)?k.some(O=>w.includes(O)||V.includes(O)):C.includes(t)?C.some(O=>w.includes(O)||V.includes(O)):w.includes(t)||V.includes(t)})}return o.maxPrice&&(r=r.filter(t=>t.basePrice<=o.maxPrice)),o.minRating&&o.minRating>0&&(r=r.filter(t=>t.rating>=o.minRating)),o.starRatings&&o.starRatings.length>0&&(r=r.filter(t=>o.starRatings.some(h=>h===5?t.rating>=4.5:h===4?t.rating>=4&&t.rating<4.5:h===3?t.rating<4:!1))),o.maxDistance&&o.maxDistance.length>0&&(r=r.filter(t=>{const h=S(t.distanceFromHaram);return o.maxDistance.some(u=>{if(u===0){const k=t.view&&t.view.trim()!==""&&t.view!=="بدون إطلالة"&&t.view!=="No View";return h===0||k}return h>0&&h<=u})})),o.hasOffer&&(r=r.filter(t=>t.isOffer)),o.hasFreeBreakfast&&(r=r.filter(t=>t.hasFreeBreakfast)),o.hasFreeTransport&&(r=r.filter(t=>t.hasFreeTransport)),o.amenities&&o.amenities.length>0&&(r=r.filter(t=>o.amenities.every(h=>t.amenities?.includes(h)))),r.sort((t,h)=>{let u=0;switch(y.field){case"price":u=t.basePrice-h.basePrice;break;case"rating":u=t.rating-h.rating;break;case"distance":u=S(t.distanceFromHaram)-S(h.distanceFromHaram);break;case"reviews":u=t.reviews-h.reviews;break;case"smart":const k=t.rating*1e3/t.basePrice,C=h.rating*1e3/h.basePrice;u=k-C;break}return y.direction==="desc"?-u:u}),r},[f,o,y,v]);return{hotels:f,filteredHotels:d,loading:D,error:x,refetch:N,filters:o,setFilters:g,applyFilter:s,resetFilters:l,sortBy:y,setSortBy:j,searchQuery:v,setSearchQuery:p,totalCount:f.length,filteredCount:d.length}},Z=["مكة المكرمة","المدينة المنورة"],ee=[{name:"المملكة العربية السعودية",code:"SA",cities:["جدة","الرياض","الدمام","الخبر"]},{name:"الإمارات العربية المتحدة",code:"AE",cities:["دبي","أبوظبي","الشارقة","رأس الخيمة"]},{name:"قطر",code:"QA",cities:["الدوحة","الوكرة","الخور"]},{name:"الكويت",code:"KW",cities:["الكويت العاصمة","السالمية","الجهراء"]},{name:"البحرين",code:"BH",cities:["المنامة","المحرق","الرفاع"]},{name:"عمان",code:"OM",cities:["مسقط","صلالة","صحار"]},{name:"مصر",code:"EG",cities:["القاهرة","الغردقة","شرم الشيخ","الإسكندرية","مرسى علم"]},{name:"الأردن",code:"JO",cities:["عمان","العقبة","البحر الميت"]}],se=({destination:i,setDestination:n,closeSheet:f})=>{const[c,D]=b.useState(""),[a,x]=b.useState(null),E=H(),{hotels:o}=X(),g=Z.filter(s=>s.includes(c)),y=Array.isArray(o)?o:[],j=s=>s.toLowerCase().replace(/ة/g,"ه").replace(/أ|إ|آ/g,"ا").replace(/فندق/g,"").replace(/\b(hotel|the)\b/g,"").replace(/\s+/g," ").trim(),v=c.trim().length>=2?y.filter(s=>{if(!s||!s.name)return!1;const l=j(c).split(" ").filter(m=>m.length>0),d=j(`${s.name} ${s.nameEn||""} ${s.city||""}`);return l.every(m=>d.includes(m))}).slice(0,5):[],p=ee.map(s=>({...s,cities:s.cities.filter(l=>l.includes(c)||s.name.includes(c))})).filter(s=>s.cities.length>0),N=g.length>0||p.length>0||v.length>0;return b.useEffect(()=>{c.trim()!==""&&x(null)},[c]),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("h3",{className:"text-xl font-black text-secondary",children:"اختر وجهتك"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:65,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs font-bold text-slate-400 mt-1",children:"نغطي أغلب فنادق العالم"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:66,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:64,columnNumber:13},void 0),e.jsxDEV("div",{className:"sticky top-0 bg-white pb-2 z-10 border-b border-slate-50 mb-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:"text",placeholder:"ابحث عن فندق، مدينة أو دولة...",value:c,onChange:s=>D(s.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-[1.5rem] px-5 py-4 text-xs font-bold placeholder:text-slate-400 focus:outline-none focus:bg-white focus:border-gold transition-all"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:72,columnNumber:21},void 0),e.jsxDEV("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",children:e.jsxDEV(M,{size:16},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:80,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:79,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:71,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:70,columnNumber:13},void 0),e.jsxDEV("div",{className:"max-h-[350px] overflow-y-auto no-scrollbar scroll-smooth space-y-6 text-right",dir:"rtl",children:N?e.jsxDEV(e.Fragment,{children:[v.length>0&&e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2 px-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[e.jsxDEV(A,{size:12,className:"text-gold"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:92,columnNumber:37},void 0),"الفنادق المقترحة"]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:91,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 gap-2",children:v.map(s=>e.jsxDEV("button",{onClick:l=>{l.stopPropagation(),f(),E(`/hotel/${s.slug}`)},className:"w-full text-right p-3 rounded-[2rem] transition-all flex items-center justify-between group bg-white/50 hover:bg-white border border-transparent hover:border-gold/10 backdrop-blur-sm shadow-sm hover:shadow-md active:scale-[0.98]",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("span",{className:"block font-black text-sm group-hover:text-gold transition-colors",children:s.name},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:108,columnNumber:53},void 0),e.jsxDEV("span",{className:"block text-[10px] font-bold text-slate-400",children:s.city},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:109,columnNumber:53},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:107,columnNumber:49},void 0),e.jsxDEV("div",{className:"w-12 h-12 rounded-[1.2rem] bg-slate-100 overflow-hidden border border-slate-100 group-hover:border-gold/30 transition-all shrink-0",children:s.image?e.jsxDEV("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:113,columnNumber:57},void 0):e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-gold",children:e.jsxDEV(A,{size:18},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:116,columnNumber:61},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:115,columnNumber:57},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:111,columnNumber:49},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:106,columnNumber:45},void 0),e.jsxDEV("div",{className:"p-2 rounded-lg bg-slate-50 group-hover:bg-gold/10 text-slate-400 group-hover:text-gold transition-all",children:e.jsxDEV(P,{size:14},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:122,columnNumber:49},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:121,columnNumber:45},void 0)]},s.id,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:97,columnNumber:41},void 0))},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:95,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:90,columnNumber:29},void 0),g.length>0&&e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2 px-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[e.jsxDEV(_,{size:12,className:"text-gold"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:134,columnNumber:37},void 0),"أغلب المدن حجزاً"]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:133,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 gap-2",children:g.map(s=>e.jsxDEV("button",{onClick:l=>{l.stopPropagation(),n(s),f()},className:`w-full text-right p-4 rounded-[1.8rem] transition-all flex items-center justify-between group active:scale-[0.97] ${i===s?"bg-secondary text-white shadow-lg":"bg-white/50 hover:bg-white border border-transparent backdrop-blur-sm"}`,children:[e.jsxDEV("div",{className:`p-2 rounded-xl ${i===s?"bg-white/20":"bg-slate-100 group-hover:bg-gold/10"}`,children:e.jsxDEV(I,{size:14,className:i===s?"text-white":"text-gold"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:145,columnNumber:49},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:144,columnNumber:45},void 0),e.jsxDEV("span",{className:"font-black text-sm",children:s},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:147,columnNumber:45},void 0)]},s,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:139,columnNumber:41},void 0))},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:137,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:132,columnNumber:29},void 0),e.jsxDEV("div",{className:"space-y-2",children:p.map(s=>{const l=a===s.code||c.trim()!==""&&!v.length;return e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("button",{onClick:d=>{d.stopPropagation(),x(a===s.code?null:s.code)},className:`w-full flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${a===s.code?"bg-slate-50 border-gold/20":"bg-white border-transparent hover:bg-slate-50"}`,children:[e.jsxDEV("div",{className:"text-slate-400",children:l?e.jsxDEV(B,{size:16},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:165,columnNumber:63},void 0):e.jsxDEV(G,{size:16},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:165,columnNumber:89},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:164,columnNumber:45},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"font-black text-sm text-secondary",children:s.name},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:168,columnNumber:49},void 0),e.jsxDEV("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center",children:e.jsxDEV(K,{size:14,className:"text-gold"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:170,columnNumber:53},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:169,columnNumber:49},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:167,columnNumber:45},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:160,columnNumber:41},void 0),l&&e.jsxDEV("div",{className:"grid grid-cols-1 gap-2 pr-4 border-r-2 border-slate-50 mr-4 animate-premium-popup",children:s.cities.map(d=>e.jsxDEV("button",{onClick:m=>{m.stopPropagation(),n(d),f()},className:`w-full text-right p-4 rounded-[1.8rem] transition-all flex items-center justify-between group active:scale-[0.97] ${i===d?"bg-secondary text-white shadow-lg":"bg-white/50 hover:bg-white border border-transparent backdrop-blur-sm"}`,children:[e.jsxDEV("div",{className:`p-2 rounded-xl ${i===d?"bg-white/20":"bg-slate-100 group-hover:bg-gold/10"}`,children:e.jsxDEV(I,{size:14,className:i===d?"text-white":"text-gold"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:184,columnNumber:61},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:183,columnNumber:57},void 0),e.jsxDEV("span",{className:"font-black text-sm",children:d},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:186,columnNumber:57},void 0)]},d,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:178,columnNumber:53},void 0))},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:176,columnNumber:45},void 0)]},s.code,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:159,columnNumber:37},void 0)})},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:155,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:87,columnNumber:21},void 0):e.jsxDEV("div",{className:"text-center py-10",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300",children:e.jsxDEV(M,{size:24},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:199,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:198,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs font-bold text-slate-400",children:"عذراً، لم نجد ما تبحث عنه"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:201,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:197,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:85,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/DestinationList.tsx",lineNumber:63,columnNumber:9},void 0)},L=({label:i,subLabel:n,value:f,setter:c,min:D=0})=>e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-slate-50/50 backdrop-blur-md rounded-[2rem] border border-slate-100/50 mb-3 transition-all hover:bg-white hover:border-gold/30",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),c(f+1)},className:"w-10 h-10 rounded-full bg-gold shadow-lg flex items-center justify-center text-white hover:bg-gold-dark active:scale-90 transition-all",children:e.jsxDEV(Y,{size:18},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:19,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:15,columnNumber:13},void 0),e.jsxDEV("span",{className:"font-black text-secondary text-xl w-6 text-center",children:f},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:21,columnNumber:13},void 0),e.jsxDEV("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),c(Math.max(D,f-1))},className:"w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-slate-400 hover:text-gold active:scale-90 transition-all border border-slate-200",children:e.jsxDEV(J,{size:18},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:26,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:22,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:14,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col text-right",children:[e.jsxDEV("span",{className:"font-black text-secondary text-sm",children:i},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:30,columnNumber:13},void 0),n&&e.jsxDEV("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5",children:n},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:31,columnNumber:26},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:29,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/Counter.tsx",lineNumber:13,columnNumber:5},void 0),le=({isOpen:i,onClose:n,onSearch:f,initialStep:c="destination",hideDestination:D=!1})=>{const{searchData:a,updateSearch:x,currentMonth:E,handleNextMonth:o,handlePrevMonth:g,isSelected:y,isInRange:j,handleDaySelect:v}=W(),[p,N]=b.useState(D&&c==="destination"?"dates":c),[s,l]=b.useState(a.destination||"");if(b.useEffect(()=>{a.destination!==s&&l(a.destination||"")},[a.destination]),b.useEffect(()=>{i?(document.body.style.overflow="hidden",N(D&&c==="destination"?"dates":c)):document.body.style.overflow=""},[i,c,D]),!i)return null;const d=()=>{if(!D&&!s){N("destination"),alert("يرجى اختيار الوجهة أولاً للبدء بالبحث");return}f({city:s,checkIn:a.checkIn,checkOut:a.checkOut,guests:{adults:a.adults,children:a.children,rooms:a.rooms}}),n()},m=r=>r?r.toLocaleDateString("ar-EG",{day:"numeric",month:"long"}):"حدد التاريخ";return z.createPortal(e.jsxDEV("div",{className:"fixed inset-0 z-[10000] flex flex-col justify-end md:justify-center md:items-center",children:[e.jsxDEV("div",{className:`absolute inset-0 bg-slate-900/40 backdrop-blur-md transition-opacity duration-[400ms] ${i?"opacity-100":"opacity-0"}`,onClick:n},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV("div",{className:`relative w-full h-[100dvh] md:h-auto md:max-h-[85vh] md:w-[600px] md:rounded-[3rem] bg-white shadow-[0_-20px_80px_rgba(0,0,0,0.2)] flex flex-col overflow-hidden transition-all duration-[500ms] ease-ios transform ${i?"translate-y-0 opacity-100 scale-100":"translate-y-full md:opacity-0 md:scale-95"}`,children:[e.jsxDEV("div",{className:"pt-8 px-6 flex items-center justify-between mb-4 shrink-0 bg-white/80 backdrop-blur-md sticky top-0 z-10",children:[e.jsxDEV("button",{onClick:n,className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 active:scale-90 transition-all",children:e.jsxDEV(Q,{size:20},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:93,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:92,columnNumber:21},void 0),e.jsxDEV("h2",{className:"text-xl font-black text-secondary",children:"تعديل البحث"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:95,columnNumber:21},void 0),e.jsxDEV("button",{onClick:d,className:"text-gold font-bold text-sm active:scale-90 transition-all",children:"تطبيق"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:96,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:91,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto px-6 py-1 no-scrollbar",children:[e.jsxDEV("div",{className:`grid ${D?"grid-cols-2":"grid-cols-3"} gap-2 bg-slate-50 p-1.5 rounded-[2.5rem] border border-slate-100 mb-4 sticky top-0 z-10`,children:[!D&&e.jsxDEV("button",{onClick:()=>N("destination"),className:`py-3 rounded-full text-[12px] font-black transition-all duration-300 ${p==="destination"?"bg-white shadow-sm text-gold":"text-slate-400"}`,children:"الوجهة"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:102,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>N("dates"),className:`py-3 rounded-full text-[12px] font-black transition-all duration-300 ${p==="dates"?"bg-white shadow-sm text-gold":"text-slate-400"}`,children:"التاريخ"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:109,columnNumber:25},void 0),e.jsxDEV("button",{onClick:()=>N("guests"),className:`py-3 rounded-full text-[12px] font-black transition-all duration-300 ${p==="guests"?"bg-white shadow-sm text-gold":"text-slate-400"}`,children:"الضيوف"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:115,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:100,columnNumber:21},void 0),e.jsxDEV("div",{className:"stagger-entry active",children:e.jsxDEV("div",{className:"space-y-6",children:[p==="destination"&&e.jsxDEV(se,{destination:s,setDestination:r=>{l(r),x({destination:r}),N("dates")},closeSheet:n},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:126,columnNumber:33},void 0),p==="dates"&&e.jsxDEV(q,{currentMonth:E,handlePrevMonth:g,handleNextMonth:o,handleDaySelect:r=>{v(r),a.checkIn&&!a.checkOut&&r>a.checkIn&&setTimeout(()=>N("guests"),400)},isSelected:y,isInRange:j,checkInLabel:m(a.checkIn),checkOutLabel:m(a.checkOut),showDoubleMonth:!1},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:134,columnNumber:33},void 0),p==="guests"&&e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"p-2",children:[e.jsxDEV("h3",{className:"text-xl font-black text-secondary mb-6 text-right",children:"الضيوف والمرافق"},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:156,columnNumber:41},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(L,{label:"بالغين",subLabel:"11 سنة فأكثر",value:a.adults||0,setter:r=>x({adults:r}),min:1},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:158,columnNumber:45},void 0),e.jsxDEV(L,{label:"أطفال",subLabel:"تحت 11 سنة",value:a.children||0,setter:r=>x({children:r})},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:159,columnNumber:45},void 0),e.jsxDEV("div",{className:"pt-4 border-t border-slate-100/50 mt-4",children:e.jsxDEV(L,{label:"عدد الغرف",subLabel:"المطلوبة",value:a.rooms||0,setter:r=>x({rooms:r}),min:1},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:161,columnNumber:49},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:160,columnNumber:45},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:157,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:155,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:154,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:124,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:123,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:99,columnNumber:17},void 0),e.jsxDEV("div",{className:"p-6 pb-12 border-t border-slate-100 shrink-0 bg-white",children:e.jsxDEV("button",{onClick:d,className:"w-full bg-secondary text-white py-6 rounded-[2.5rem] font-black text-xl shadow-2xl shadow-secondary/20 active:scale-95 transition-all flex items-center justify-center gap-3",children:[e.jsxDEV(M,{size:22},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:176,columnNumber:25},void 0),"بحث الآن"]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:172,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:171,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:90,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/el3attal/OneDrive/Desktop/dd (7)/dd/src/features/search/components/MobileSearchOverlay.tsx",lineNumber:87,columnNumber:9},void 0),document.body)};export{L as C,se as D,le as M,X as a,W as u};
